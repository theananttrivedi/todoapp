<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="static/font/Inter/fonts.css" />
    <link rel="stylesheet" href="static/css/styles.css" />
    <link rel="stylesheet" href="static/css/todos.css" />
    <link rel="stylesheet" href="static/css/tasks.css" />
    <link rel="stylesheet" href="static/css/modal.css" />
    <title>Notesify</title>
  </head>
  <body>
    <nav>
      <div class="left-title"></div>
      <p class="main-title">Notesify</p>
      <div class="right-title" id="new-note">+</div>
    </nav>
    <div class="todos" id="todos">
      <!-- To be filled by Javascript -->
    </div>

    <div id="todo-modal" class="todo-item-modal-container">
      <div class="todo-item-modal">
        <header class="todo-modal-header">Edit</header>
        <section class="todo-modal-content">
          <div class="todo-modal-form" id="modal-form">
            <form>
              <input
                id="modal-title"
                class="task-form-input-field"
                name="title"
                type="text"
                placeholder="Title"
              />
              <input
                id="modal-detail"
                class="task-form-input-field"
                name="detail"
                type="text"
                placeholder="Detail"
              />

              <input
                id="modal-date"
                class="task-form-input-field"
                name="datetime"
                type="datetime-local"
              />
              <div class="task-form-input-field-container">
                <input
                  name="isimportant"
                  id="modal-isimportant"
                  class="task-form-input-checkbox"
                  type="checkbox"
                />
                <label for="important-checkbox">Important!</label>
              </div>
            </form>
          </div>
        </section>
        <footer class="todo-modal-footer">
          <div id="modal-delete" class="todo-delete-button">Delete</div>
          <p id="modal-ok" class="cancel-button">OK</p>
        </footer>
      </div>
    </div>

    <div class="task-form" id="task-form">
      <header>
        <div class="task-form-left-title">Cancel</div>
        <p class="task-form-main-title">Note</p>
        <div id="add-todo" class="task-form-right-title">Add</div>
      </header>
      <form>
        <input
          class="task-form-input-field"
          name="title"
          type="text"
          placeholder="Title"
        />
        <input
          class="task-form-input-field"
          name="detail"
          type="text"
          placeholder="Detail"
        />

        <input
          class="task-form-input-field"
          name="datetime"
          type="datetime-local"
        />
        <div class="task-form-input-field-container">
          <input
            name="isimportant"
            id="important-checkbox"
            class="task-form-input-checkbox"
            type="checkbox"
          />
          <label for="important-checkbox">Important!</label>
        </div>
      </form>
    </div>
    <script src="static/js/utils.js"></script>
    <!-- <script src="static/js/data.js"></script>
    <script src="static/js/selectors.js"></script>
    <script src="static/js/eventListeners.js"></script>
    <script src="static/js/app.js"></script>
    <script src="static/js/inputHandlers.js"></script> -->
    <script src="static/js/TodoListBinding.js"></script>
    <script src="static/js/TodoFormBinding.js"></script>
    <script src="static/js/TodoModalBinding.js"></script>
    <script>
      const todoListElement = document.getElementById("todos");
      const todoFormElement = document.getElementById("task-form");
      const titleField = document.querySelector('input[name="title"]');
      const dateField = document.querySelector('input[name="datetime"]');
      const isImportantField = document.querySelector(
        'input[name="isimportant"]'
      );
      const isCompletedField = document.getElementById("important-checkbox");
      const addButton = document.getElementById("add-todo");
      const cancelButton = document.querySelector(".task-form-left-title");
      const todoListBinding = new TodoListBinding(todoListElement);
      const todoFormBinding = new TodoFormBinding(
        todoFormElement,
        titleField,
        dateField,
        isCompletedField,
        isImportantField,
        addButton,
        cancelButton
      );

      const newNote = document.getElementById("new-note");
      // or use arrow function to save this to refer
      // to the object
      newNote.onclick = todoFormBinding.open.bind(todoFormBinding);

      todoFormBinding.addTodoOnClick((formValuesFunc) => {
        todoListBinding.add({
          title: formValuesFunc.title,
          date: formValuesFunc.date,
          isCompleted: false,
          isImportant: formValuesFunc.isImportant,
        });
        todoFormBinding.resetFormValues();
      });

      const todoModalElement = document.getElementById("todo-modal");
      const deleteButton = document.getElementById("modal-delete");
      const okButton = document.getElementById("modal-ok");
      const modalTodoFormElement = document.getElementById("modal-form");
      const modalTitleField = document.getElementById("modal-title");
      const modalDateField = document.getElementById("modal-date");
      const modalIsImportantField =
        document.getElementById("modal-isimportant");
      const todoModalBinding = new TodoModalBinding(
        todoModalElement,
        deleteButton,
        okButton,
        modalTodoFormElement,
        modalTitleField,
        modalDateField,
        modalIsImportantField
      );
    </script>
  </body>
</html>
